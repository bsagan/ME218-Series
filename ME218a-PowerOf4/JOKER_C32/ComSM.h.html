<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>ComSM.h</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl"><a name="ComSM.h_1"></a><span class="hl lin">    1 </span><span class="hl com">/****************************************************************************</span>
<a name="ComSM.h_2"></a><span class="hl lin">    2 </span><span class="hl com"></span>
<a name="ComSM.h_3"></a><span class="hl lin">    3 </span><span class="hl com">  Header file for MORSE Service Module</span>
<a name="ComSM.h_4"></a><span class="hl lin">    4 </span><span class="hl com">  based on the Gen2 Events and Services Framework</span>
<a name="ComSM.h_5"></a><span class="hl lin">    5 </span><span class="hl com"></span>
<a name="ComSM.h_6"></a><span class="hl lin">    6 </span><span class="hl com"> ****************************************************************************/</span>
<a name="ComSM.h_7"></a><span class="hl lin">    7 </span>
<a name="ComSM.h_8"></a><span class="hl lin">    8 </span><span class="hl ppc">#ifndef ComSM_H</span>
<a name="ComSM.h_9"></a><span class="hl lin">    9 </span><span class="hl ppc">#define ComSM_H</span>
<a name="ComSM.h_10"></a><span class="hl lin">   10 </span>
<a name="ComSM.h_11"></a><span class="hl lin">   11 </span><span class="hl slc">// Event Definitions</span>
<a name="ComSM.h_12"></a><span class="hl lin">   12 </span><span class="hl ppc">#include</span> <span class="hl pps">&quot;ES_Configure.h&quot;</span><span class="hl ppc"></span>
<a name="ComSM.h_13"></a><span class="hl lin">   13 </span><span class="hl ppc">#include</span> <span class="hl pps">&quot;ES_Types.h&quot;</span><span class="hl ppc"></span>
<a name="ComSM.h_14"></a><span class="hl lin">   14 </span>
<a name="ComSM.h_15"></a><span class="hl lin">   15 </span><span class="hl slc">// typedefs for the states</span>
<a name="ComSM.h_16"></a><span class="hl lin">   16 </span><span class="hl slc">// State definitions for use with the query function</span>
<a name="ComSM.h_17"></a><span class="hl lin">   17 </span><span class="hl kwc">typedef</span> <span class="hl kwb">enum</span> <span class="hl opt">{</span> Wait2Receive<span class="hl opt">,</span> Wait2Send<span class="hl opt">,</span> Wait4Ack<span class="hl opt">,</span>
<a name="ComSM.h_18"></a><span class="hl lin">   18 </span>               WaitStrobeFall<span class="hl opt">,</span> Idle
<a name="ComSM.h_19"></a><span class="hl lin">   19 </span>             <span class="hl opt">}</span> ComState_t <span class="hl opt">;</span>
<a name="ComSM.h_20"></a><span class="hl lin">   20 </span>
<a name="ComSM.h_21"></a><span class="hl lin">   21 </span>
<a name="ComSM.h_22"></a><span class="hl lin">   22 </span><span class="hl slc">// Public Function Prototypes</span>
<a name="ComSM.h_23"></a><span class="hl lin">   23 </span>
<a name="ComSM.h_24"></a><span class="hl lin">   24 </span>boolean <span class="hl kwd">InitComSM</span> <span class="hl opt">(</span> <span class="hl kwb">uint8_t</span> Priority <span class="hl opt">);</span>
<a name="ComSM.h_25"></a><span class="hl lin">   25 </span>boolean <span class="hl kwd">PostComSM</span><span class="hl opt">(</span> ES_Event ThisEvent <span class="hl opt">);</span>
<a name="ComSM.h_26"></a><span class="hl lin">   26 </span>ES_Event <span class="hl kwd">RunComSM</span><span class="hl opt">(</span> ES_Event ThisEvent <span class="hl opt">);</span>
<a name="ComSM.h_27"></a><span class="hl lin">   27 </span>ComState_t <span class="hl kwd">QueryComSM</span> <span class="hl opt">(</span> <span class="hl kwb">void</span> <span class="hl opt">);</span>
<a name="ComSM.h_28"></a><span class="hl lin">   28 </span>
<a name="ComSM.h_29"></a><span class="hl lin">   29 </span>
<a name="ComSM.h_30"></a><span class="hl lin">   30 </span><span class="hl slc">//Definitions for Hardware Ports</span>
<a name="ComSM.h_31"></a><span class="hl lin">   31 </span>
<a name="ComSM.h_32"></a><span class="hl lin">   32 </span><span class="hl ppc">#define STROBE_DIR     DDRT_DDRT3</span>           <span class="hl slc">//all lines can be either inputs or outputs</span>
<a name="ComSM.h_33"></a><span class="hl lin">   33 </span><span class="hl ppc"></span><span class="hl ppc">#define D0_DIR         DDRT_DDRT6</span>
<a name="ComSM.h_34"></a><span class="hl lin">   34 </span><span class="hl ppc">#define D1_DIR         DDRT_DDRT5</span>
<a name="ComSM.h_35"></a><span class="hl lin">   35 </span><span class="hl ppc">#define D2_DIR         DDRT_DDRT4</span>
<a name="ComSM.h_36"></a><span class="hl lin">   36 </span><span class="hl ppc">#define ACK_DIR        DDRT_DDRT7</span>
<a name="ComSM.h_37"></a><span class="hl lin">   37 </span>
<a name="ComSM.h_38"></a><span class="hl lin">   38 </span><span class="hl ppc">#define STROBE         PTT_PTT3</span>
<a name="ComSM.h_39"></a><span class="hl lin">   39 </span><span class="hl ppc">#define D0             PTT_PTT4</span>
<a name="ComSM.h_40"></a><span class="hl lin">   40 </span><span class="hl ppc">#define D1             PTT_PTT5</span>
<a name="ComSM.h_41"></a><span class="hl lin">   41 </span><span class="hl ppc">#define D2             PTT_PTT6</span>
<a name="ComSM.h_42"></a><span class="hl lin">   42 </span><span class="hl ppc">#define ACKNOWLEDGE    PTT_PTT7</span>
<a name="ComSM.h_43"></a><span class="hl lin">   43 </span>
<a name="ComSM.h_44"></a><span class="hl lin">   44 </span><span class="hl slc">//////MESSAGES THAT BATMAN CAN SEND</span>
<a name="ComSM.h_45"></a><span class="hl lin">   45 </span><span class="hl com">/*</span>
<a name="ComSM.h_46"></a><span class="hl lin">   46 </span><span class="hl com">#define GameActive     0</span>
<a name="ComSM.h_47"></a><span class="hl lin">   47 </span><span class="hl com">#define GameEnd        1</span>
<a name="ComSM.h_48"></a><span class="hl lin">   48 </span><span class="hl com">#define OilSlick       2</span>
<a name="ComSM.h_49"></a><span class="hl lin">   49 </span><span class="hl com">#define OilIndicate    3</span>
<a name="ComSM.h_50"></a><span class="hl lin">   50 </span><span class="hl com">#define GameStart      4</span>
<a name="ComSM.h_51"></a><span class="hl lin">   51 </span><span class="hl com">#define BatmanReady    5</span>
<a name="ComSM.h_52"></a><span class="hl lin">   52 </span><span class="hl com">#define BatmanWin      6</span>
<a name="ComSM.h_53"></a><span class="hl lin">   53 </span><span class="hl com">#define BatmanLose     7</span>
<a name="ComSM.h_54"></a><span class="hl lin">   54 </span><span class="hl com"></span>
<a name="ComSM.h_55"></a><span class="hl lin">   55 </span><span class="hl com"></span>
<a name="ComSM.h_56"></a><span class="hl lin">   56 </span><span class="hl com">//////MESSAGES THAT BATMAN CAN RECEIVE</span>
<a name="ComSM.h_57"></a><span class="hl lin">   57 </span><span class="hl com">#define JokerReady     0</span>
<a name="ComSM.h_58"></a><span class="hl lin">   58 </span><span class="hl com">#define JokerLose      1</span>
<a name="ComSM.h_59"></a><span class="hl lin">   59 </span><span class="hl com">//#define OilSlick       2 used in both send / receive</span>
<a name="ComSM.h_60"></a><span class="hl lin">   60 </span><span class="hl com">//#define OilIndicate    3 used in both send / receive</span>
<a name="ComSM.h_61"></a><span class="hl lin">   61 </span><span class="hl com">#define JokerWin       4</span>
<a name="ComSM.h_62"></a><span class="hl lin">   62 </span><span class="hl com">#define J_GameOver       5</span>
<a name="ComSM.h_63"></a><span class="hl lin">   63 </span><span class="hl com"></span>
<a name="ComSM.h_64"></a><span class="hl lin">   64 </span><span class="hl com">*/</span>
<a name="ComSM.h_65"></a><span class="hl lin">   65 </span>
<a name="ComSM.h_66"></a><span class="hl lin">   66 </span><span class="hl slc">//////MESSAGES THAT JOKER CAN SEND</span>
<a name="ComSM.h_67"></a><span class="hl lin">   67 </span><span class="hl ppc">#define J_JokerReady     0</span>
<a name="ComSM.h_68"></a><span class="hl lin">   68 </span><span class="hl ppc">#define J_JokerLose      1</span>
<a name="ComSM.h_69"></a><span class="hl lin">   69 </span><span class="hl ppc">#define J_OilSlick       2</span>
<a name="ComSM.h_70"></a><span class="hl lin">   70 </span><span class="hl ppc">#define J_OilIndicate    3</span>
<a name="ComSM.h_71"></a><span class="hl lin">   71 </span><span class="hl ppc">#define J_JokerWin       4</span>
<a name="ComSM.h_72"></a><span class="hl lin">   72 </span><span class="hl ppc">#define NoWinGameOver    5</span>
<a name="ComSM.h_73"></a><span class="hl lin">   73 </span>
<a name="ComSM.h_74"></a><span class="hl lin">   74 </span>
<a name="ComSM.h_75"></a><span class="hl lin">   75 </span><span class="hl slc">//////MESSAGES THAT JOKER CAN RECEIVE</span>
<a name="ComSM.h_76"></a><span class="hl lin">   76 </span><span class="hl ppc">#define J_GameActive     0</span>
<a name="ComSM.h_77"></a><span class="hl lin">   77 </span><span class="hl ppc">#define J_GameEnd        1</span>
<a name="ComSM.h_78"></a><span class="hl lin">   78 </span><span class="hl slc">//#define J_OilSlick       2 used in both send / receive</span>
<a name="ComSM.h_79"></a><span class="hl lin">   79 </span><span class="hl slc">//#define J_OilIndicate    3 used in both send / receive</span>
<a name="ComSM.h_80"></a><span class="hl lin">   80 </span><span class="hl ppc">#define J_GameStart      4</span>
<a name="ComSM.h_81"></a><span class="hl lin">   81 </span><span class="hl ppc">#define J_BatmanReady    5</span>
<a name="ComSM.h_82"></a><span class="hl lin">   82 </span><span class="hl ppc">#define J_BatmanWin      6</span>
<a name="ComSM.h_83"></a><span class="hl lin">   83 </span><span class="hl ppc">#define J_BatmanLose     7</span>
<a name="ComSM.h_84"></a><span class="hl lin">   84 </span>
<a name="ComSM.h_85"></a><span class="hl lin">   85 </span>
<a name="ComSM.h_86"></a><span class="hl lin">   86 </span><span class="hl slc">//////DEFINES FOR EVENT PARAMS</span>
<a name="ComSM.h_87"></a><span class="hl lin">   87 </span><span class="hl ppc">#define FROMJOKER 1</span> <span class="hl slc">// Tells Gameplay that the OILSLICK event was valid and from Joker</span>
<a name="ComSM.h_88"></a><span class="hl lin">   88 </span><span class="hl ppc"></span><span class="hl ppc">#define FROMBATMAN 2</span>
<a name="ComSM.h_89"></a><span class="hl lin">   89 </span><span class="hl slc">//Public variables</span>
<a name="ComSM.h_90"></a><span class="hl lin">   90 </span>
<a name="ComSM.h_91"></a><span class="hl lin">   91 </span><span class="hl ppc">#endif</span> <span class="hl com">/* FSMTemplate_H */</span><span class="hl ppc"></span>
<a name="ComSM.h_92"></a><span class="hl lin">   92 </span>
<a name="ComSM.h_93"></a><span class="hl lin">   93 </span>
</pre>
</body>
</html>
<!--HTML generated by highlight 3.5, http://www.andre-simon.de/-->
